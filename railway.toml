# Railway configuration for CPA Scheduler
[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "sh -c 'PYTHONPATH=. alembic upgrade head && python -m scheduler.main'"
healthcheckPath = "/health"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[env]
APP_NAME = "cpa-scheduler"
ENVIRONMENT = "production"
LOG_LEVEL = "INFO"
API_PORT = "8000"
DATABASE_URL = "sqlite+aiosqlite:///./data/scheduler.db"
REDIS_URL = "${{REDIS_URL}}"
